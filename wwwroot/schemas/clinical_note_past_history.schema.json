{
	"$schema": "https://json-schema.org/draft/2020-12/schema",
	"$id": "https://example.com/clinical-note-past-history.schema.json",
	"title": "Clinical Note Past History Schema",
	"type": "object",
	"properties": {
		"pastMedicalHistory": {
			"type": "object",
			"$comment": "Comprehensive past medical history including chronic conditions and comorbidities",
			"description": "Patient's past medical history covering major chronic diseases (COPD, CKD, CAD, CHF, diabetes, strokes, atrial fibrillation, osteoporosis, dementia) with structured fields for diagnosis status, medications, specialists, and hospitalizations",
			"properties": {
				"COPD": {
					"type": "object",
					"$comment": "Chronic Obstructive Pulmonary Disease",
					"description": "COPD diagnosis status with pulmonary function test results, hospitalization history, and specialist follow-up",
					"properties": {
						"diagnosed": {
							"type": "boolean",
							"description": "Whether patient has been diagnosed with COPD"
						},
						"diagnosisMethod": {
							"type": "object",
							"properties": {
								"PFT": {
									"type": "object",
									"$comment": "Pulmonary Function Test",
									"properties": {
										"FEV1": {
											"type": ["number", "null"],
											"minimum": 0,
											"maximum": 10,
											"description": "Forced Expiratory Volume in 1 second, measured in liters"
										},
										"FVC_FEV1_ratio": {
											"type": ["number", "null"],
											"minimum": 0,
											"maximum": 1,
											"description": "Ratio of Forced Vital Capacity to FEV1, expressed as a decimal (0-1)"
										},
										"ventolinResponse": {
											"type": ["string", "null"],
											"description": "Patient response to Ventolin bronchodilator"
										}
									},
									"additionalProperties": false
								}
							},
							"additionalProperties": false
						},
						"lastHospitalization": {
							"type": ["string", "null"],
							"format": "date",
							"$comment": "ISO 8601 format: YYYY-MM-DD",
							"description": "Date of most recent hospitalization for COPD exacerbation"
						},
						"respirologist": {
							"type": ["string", "null"],
							"description": "Name of respirologist (lung specialist) following patient for COPD"
						}
					},
					"required": ["diagnosed"],
					"additionalProperties": false,
					"if": {
						"properties": {
							"diagnosed": { "const": false }
						}
					},
					"then": {
						"properties": {
							"diagnosed": {},
							"diagnosisMethod": { "not": {} },
							"lastHospitalization": { "not": {} },
							"respirologist": { "not": {} }
						}
					}
				},

				"CKD": {
					"type": "object",
					"$comment": "Chronic Kidney Disease",
					"description": "Chronic kidney disease history including dialysis status, kidney-specific medications, lab values (creatinine, eGFR), and specialist care",
					"properties": {
						"previousDialysis": {
							"type": "boolean",
							"description": "Whether patient has ever required dialysis treatment"
						},
						"kidneyMedications": {
							"type": "array",
							"items": { "type": "string" },
							"description": "List of kidney-specific medications"
						},
						"creatinine": {
							"type": ["number", "null"],
							"minimum": 0,
							"maximum": 20,
							"description": "Serum creatinine level in mg/dL"
						},
						"eGFR": {
							"type": ["number", "null"],
							"minimum": 0,
							"maximum": 200,
							"description": "Estimated Glomerular Filtration Rate in mL/min/1.73mÂ²"
						},
						"lastHospitalization": {
							"type": ["string", "null"],
							"format": "date",
							"$comment": "ISO 8601 format: YYYY-MM-DD",
							"description": "Date of most recent hospitalization related to kidney disease"
						},
						"nephrologist": {
							"type": ["string", "null"],
							"description": "Name of nephrologist (kidney specialist) following patient"
						}
					},
					"required": ["previousDialysis"],
					"additionalProperties": false,
					"if": {
						"properties": {
							"previousDialysis": { "const": false }
						}
					},
					"then": {
						"properties": {
							"previousDialysis": {},
							"kidneyMedications": { "maxItems": 0 },
							"creatinine": { "const": null },
							"eGFR": { "const": null },
							"lastHospitalization": { "const": null },
							"nephrologist": { "const": null }
						}
					}
				},

				"CAD": {
					"type": "object",
					"$comment": "Coronary Artery Disease",
					"description": "Coronary artery disease assessment including NYHA functional class, degree of stenosis, and cardiology follow-up",
					"properties": {
						"NYHA_class": {
							"type": ["string", "null"],
							"$comment": "New York Heart Association (NYHA) Functional Classification",
							"description": "NYHA functional classification of heart failure severity (I=mild, IV=severe)",
							"enum": ["I", "II", "III", "IV", null]
						},
						"degreeOfStenosis": {
							"type": "object",
							"description": "Extent of coronary artery narrowing",
							"properties": {
								"measuredByAngiography": {
									"type": ["string", "null"],
									"description": "Stenosis percentage as measured by coronary angiography"
								},
								"type": {
									"type": ["string", "null"],
									"enum": ["Type I", "Type II", null],
									"description": "Classification type of stenosis"
								}
							},
							"additionalProperties": false
						},
						"lastHospitalization": {
							"type": ["string", "null"],
							"format": "date",
							"$comment": "ISO 8601 format: YYYY-MM-DD",
							"description": "Date of most recent hospitalization for CAD-related event (e.g., angina, MI)"
						},
						"cardiologist": {
							"type": ["string", "null"],
							"description": "Name of cardiologist following patient for CAD"
						}
					},
					"additionalProperties": false
				},

				"CHF": {
					"type": "object",
					"$comment": "Congestive Heart Failure",
					"description": "Heart failure classification with echocardiogram results, medications including GDMT, and cardiology care",
					"properties": {
						"type": {
							"type": ["string", "null"],
							"description": "Heart failure type: HFpEF (preserved ejection fraction), HFmEF (mid-range), HFrEF (reduced)",
							"enum": ["HFpEF", "HFmEF", "HFrEF", null]
						},
						"echo": {
							"type": "object",
							"description": "Echocardiogram findings",
							"properties": {
								"date": {
									"type": ["string", "null"],
									"format": "date",
									"$comment": "ISO 8601 format: YYYY-MM-DD",
									"description": "Date of echocardiogram"
								},
								"ejectionFractionPercent": {
									"type": ["number", "null"],
									"minimum": 0,
									"maximum": 100,
									"description": "Left ventricular ejection fraction as a percentage"
								}
							},
							"additionalProperties": false
						},
						"medications": {
							"type": "array",
							"items": { "type": "string" },
							"description": "List of all heart failure medications"
						},
						"GDMT_medications": {
							"type": "array",
							"$comment": "Goal-directed medical therapy",
							"description": "Evidence-based medications for heart failure (e.g., ACE inhibitors, beta-blockers, SGLT2 inhibitors)",
							"items": { "type": "string" }
						},
						"lastHospitalization": {
							"type": ["string", "null"],
							"format": "date",
							"$comment": "ISO 8601 format: YYYY-MM-DD",
							"description": "Date of most recent hospitalization for heart failure exacerbation"
						},
						"cardiologist": {
							"type": ["string", "null"],
							"description": "Name of cardiologist managing heart failure"
						}
					},
					"additionalProperties": false
				},

				"diabetes": {
					"type": "object",
					"description": "Diabetes mellitus diagnosis, medications, and endocrinology care",
					"properties": {
						"diagnosed": {
							"type": "boolean",
							"description": "Whether patient has been diagnosed with diabetes mellitus"
						},
						"medications": {
							"type": "array",
							"items": { "type": "string" },
							"description": "List of diabetes medications (oral hypoglycemics, insulin, etc.)"
						},
						"endocrinologist": {
							"type": ["string", "null"],
							"description": "Name of endocrinologist managing diabetes"
						}
					},
					"required": ["diagnosed"],
					"additionalProperties": false,
					"if": {
						"properties": {
							"diagnosed": { "const": false }
						}
					},
					"then": {
						"properties": {
							"diagnosed": {},
							"medications": { "maxItems": 0 },
							"endocrinologist": { "const": null }
						}
					}
				},

				"strokes": {
					"type": "object",
					"description": "Stroke/CVA history with medications and neurology follow-up",
					"properties": {
						"historyOfStroke": {
							"type": "boolean",
							"description": "Whether patient has history of stroke or cerebrovascular accident (CVA)"
						},
						"lastHospitalization": {
							"type": ["string", "null"],
							"format": "date",
							"$comment": "ISO 8601 format: YYYY-MM-DD",
							"description": "Date of most recent stroke event or hospitalization"
						},
						"medications": {
							"type": "array",
							"items": { "type": "string" },
							"description": "Stroke prevention medications (antiplatelet, anticoagulation, etc.)"
						},
						"neurologist": {
							"type": ["string", "null"],
							"description": "Name of neurologist following patient for stroke"
						}
					},
					"required": ["historyOfStroke"],
					"additionalProperties": false,
					"if": {
						"properties": {
							"historyOfStroke": { "const": false }
						}
					},
					"then": {
						"properties": {
							"historyOfStroke": {},
							"lastHospitalization": { "const": null },
							"medications": { "maxItems": 0 },
							"neurologist": { "const": null }
						}
					}
				},

				"atrialFibrillation": {
					"type": "object",
					"description": "Atrial fibrillation diagnosis with rate control, anticoagulation, and cardiology care",
					"properties": {
						"diagnosed": {
							"type": "boolean",
							"description": "Whether patient has been diagnosed with atrial fibrillation"
						},
						"rateControlMedications": {
							"type": "array",
							"items": { "type": "string" },
							"description": "Medications for heart rate control in atrial fibrillation"
						},
						"anticoagulation": {
							"type": ["string", "null"],
							"description": "Anticoagulation medication (e.g., warfarin, DOACs)"
						},
						"lastHospitalization": {
							"type": ["string", "null"],
							"format": "date",
							"$comment": "ISO 8601 format: YYYY-MM-DD",
							"description": "Date of most recent hospitalization for atrial fibrillation"
						},
						"cardiologist": {
							"type": ["string", "null"],
							"description": "Name of cardiologist managing atrial fibrillation"
						}
					},
					"required": ["diagnosed"],
					"additionalProperties": false,
					"if": {
						"properties": {
							"diagnosed": { "const": false }
						}
					},
					"then": {
						"properties": {
							"diagnosed": {},
							"rateControlMedications": { "maxItems": 0 },
							"anticoagulation": { "const": null },
							"lastHospitalization": { "const": null },
							"cardiologist": { "const": null }
						}
					}
				},

				"osteoporosis": {
					"type": "object",
					"description": "Osteoporosis diagnosis with bone density testing and risk factor history",
					"properties": {
						"diagnosed": {
							"type": "boolean",
							"description": "Whether patient has been diagnosed with osteoporosis"
						},
						"timeOfDiagnosis": {
							"type": ["string", "null"],
							"description": "When osteoporosis was diagnosed (free text)"
						},
						"boneScanResults": {
							"type": ["string", "null"],
							"description": "Bone density scan results (T-score, DEXA findings)"
						},
						"previousBirthControlUse": {
							"type": ["string", "null"],
							"description": "History of birth control use (relevant for estrogen exposure)"
						}
					},
					"required": ["diagnosed"],
					"additionalProperties": false,
					"if": {
						"properties": {
							"diagnosed": { "const": false }
						}
					},
					"then": {
						"properties": {
							"diagnosed": {},
							"timeOfDiagnosis": { "const": null },
							"boneScanResults": { "const": null },
							"previousBirthControlUse": { "const": null }
						}
					}
				},

				"dementia": {
					"type": "object",
					"description": "Dementia diagnosis with cognitive medications and geriatric specialist care",
					"properties": {
						"diagnosed": {
							"type": "boolean",
							"description": "Whether patient has been diagnosed with dementia or cognitive impairment"
						},
						"followedBy": {
							"type": ["string", "null"],
							"description": "Healthcare provider managing dementia care"
						},
						"medications": {
							"type": "array",
							"items": { "type": "string" },
							"description": "Cognitive medications (cholinesterase inhibitors, memantine, etc.)"
						},
						"gerontologist": {
							"type": ["string", "null"],
							"description": "Name of gerontologist or geriatrician following patient"
						}
					},
					"required": ["diagnosed"],
					"additionalProperties": false,
					"if": {
						"properties": {
							"diagnosed": { "const": false }
						}
					},
					"then": {
						"properties": {
							"diagnosed": {},
							"followedBy": { "const": null },
							"medications": { "maxItems": 0 },
							"gerontologist": { "const": null }
						}
					}
				},

				"otherPastMedicalHistory": {
					"type": "array",
					"items": { "type": "string" },
					"description": "Other medical conditions not covered by the structured fields above"
				},

				"previouslyHealthy": {
					"type": "boolean",
					"description": "Whether patient was previously healthy with no significant past medical history"
				}
			},
			"required": ["previouslyHealthy"],
			"additionalProperties": false
		},

		"allergies": {
			"type": "object",
			"$comment": "Patient allergy information with comprehensive tracking",
			"description": "Allergy history including specific allergens with reactions and onset timing, epipen prescription status, other anti-allergy medications, and NKDA flag",
			"properties": {
				"list": {
					"type": "array",
					"description": "List of specific allergens with reactions and onset timing",
					"items": {
						"type": "object",
						"properties": {
							"allergen": {
								"type": "string",
								"description": "Name of allergen (medication, food, environmental)"
							},
							"reaction": {
								"type": "string",
								"description": "Type of allergic reaction experienced"
							},
							"onset": {
								"type": "string",
								"enum": ["childhood", "adolescence", "adult"],
								"description": "Life stage when allergy first appeared"
							}
						},
						"required": ["allergen", "reaction", "onset"],
						"additionalProperties": false
					}
				},
				"epipenPrescribed": {
					"type": "boolean",
					"description": "Whether patient has been prescribed an EpiPen for severe allergies"
				},
				"otherAntiAllergyMeds": {
					"type": "array",
					"items": { "type": "string" },
					"description": "Other anti-allergy medications (antihistamines, etc.)"
				},
				"noKnownDrugAllergies": {
					"type": "boolean",
					"description": "Whether patient has no known drug allergies (NKDA)"
				}
			},
			"required": ["epipenPrescribed", "noKnownDrugAllergies"],
			"additionalProperties": false
		},

		"socialHistory": {
			"type": "object",
			"$comment": "Social determinants of health and lifestyle factors",
			"description": "Comprehensive social history including tobacco use, alcohol consumption, recreational drug use, living situation with hazards assessment, and work/exercise information",
			"properties": {
				"smoking": {
					"type": "object",
					"description": "Tobacco smoking history with pack-years and cessation details",
					"properties": {
						"status": {
							"type": "string",
							"enum": ["never", "previous", "current"],
							"description": "Current smoking status"
						},
						"previous": {
							"type": "object",
							"description": "Details for previous smokers who have quit",
							"properties": {
								"packsPerDay": {
									"type": ["number", "null"],
									"minimum": 0,
									"maximum": 10,
									"description": "Average packs smoked per day when smoking"
								},
								"years": {
									"type": ["number", "null"],
									"minimum": 0,
									"maximum": 100,
									"description": "Total years of smoking"
								},
								"quitYearsAgo": {
									"type": ["number", "null"],
									"minimum": 0,
									"maximum": 100,
									"description": "How many years ago patient quit smoking"
								}
							},
							"additionalProperties": false
						},
						"current": {
							"type": "object",
							"description": "Details for current active smokers",
							"properties": {
								"packsPerDay": {
									"type": ["number", "null"],
									"minimum": 0,
									"maximum": 10,
									"description": "Average packs smoked per day currently"
								},
								"startedYearsAgo": {
									"type": ["number", "null"],
									"minimum": 0,
									"maximum": 100,
									"description": "How many years ago patient started smoking"
								},
								"type": {
									"type": "array",
									"items": {
										"type": "string",
										"enum": ["cigarettes", "marijuana"]
									},
									"description": "Types of substances smoked"
								}
							},
							"additionalProperties": false
						}
					},
					"required": ["status"],
					"additionalProperties": false
				},

				"alcohol": {
					"type": "object",
					"description": "Alcohol consumption history with current and past drinking patterns",
					"properties": {
						"status": {
							"type": "string",
							"enum": ["never", "previous", "drinks"],
							"description": "Current alcohol consumption status"
						},
						"drinksPerDay": {
							"type": ["number", "null"],
							"minimum": 0,
							"maximum": 50,
							"description": "Current average drinks per day (if status is 'drinks')"
						},
						"previous": {
							"type": "object",
							"description": "Details for previous drinkers who have stopped",
							"properties": {
								"drinksPerDay": {
									"type": ["number", "null"],
									"minimum": 0,
									"maximum": 50,
									"description": "Average drinks per day when drinking"
								},
								"quitYearsAgo": {
									"type": ["number", "null"],
									"minimum": 0,
									"maximum": 100,
									"description": "How many years ago patient stopped drinking"
								}
							},
							"additionalProperties": false
						}
					},
					"required": ["status"],
					"additionalProperties": false
				},

				"recreationalDrugs": {
					"type": "object",
					"description": "Recreational drug use history with frequency and timeline for each substance",
					"properties": {
						"used": {
							"type": "boolean",
							"description": "Whether patient has ever used recreational drugs"
						},
						"substances": {
							"type": "array",
							"description": "List of substances used with individual usage patterns",
							"items": {
								"type": "object",
								"properties": {
									"substance": {
										"type": "string",
										"description": "Name of recreational substance"
									},
									"useFrequency": {
										"type": ["string", "null"],
										"description": "Frequency of use (e.g., daily, weekly, monthly)"
									},
									"startedYearsAgo": {
										"type": ["number", "null"],
										"minimum": 0,
										"maximum": 100,
										"description": "How many years ago use began"
									},
									"finishedYearsAgo": {
										"type": ["number", "null"],
										"minimum": 0,
										"maximum": 100,
										"description": "How many years ago use stopped (null if ongoing)"
									}
								},
								"required": ["substance"],
								"additionalProperties": false
							}
						}
					},
					"required": ["used"],
					"additionalProperties": false
				},

				"livingSituation": {
					"type": "object",
					"description": "Patient's living situation including household members, residence type, and environmental hazards",
					"properties": {
						"livesWith": {
							"type": "array",
							"description": "Who the patient lives with",
							"items": {
								"type": "string",
								"enum": [
									"alone",
									"family",
									"spouse",
									"partner",
									"children",
									"pets",
									"roommate",
									"caregiver",
									"assisted living staff",
									"other"
								]
							}
						},
						"typeOfResidence": {
							"type": ["string", "null"],
							"enum": ["apartment", "house", null],
							"description": "Type of residence patient lives in"
						},
						"hazards": {
							"type": "object",
							"description": "Environmental hazards in the home",
							"properties": {
								"leadPipes": {
									"type": "boolean",
									"description": "Presence of lead pipes in home plumbing"
								},
								"insulationIssues": {
									"type": "boolean",
									"description": "Issues with home insulation or temperature control"
								}
							},
							"additionalProperties": false
						}
					},
					"additionalProperties": false
				},

				"work": {
					"type": "object",
					"description": "Occupational and physical activity information",
					"properties": {
						"typeOfWork": {
							"type": ["string", "null"],
							"description": "Patient's occupation or type of work"
						},
						"standingWalkingRequired": {
							"type": ["string", "null"],
							"description": "Amount of standing/walking required for work"
						},
						"exerciseRoutine": {
							"type": ["string", "null"],
							"description": "Patient's regular exercise or physical activity routine"
						}
					},
					"additionalProperties": false
				}
			},
			"additionalProperties": false
		},

		"familyHistory": {
			"type": "object",
			"$comment": "Family medical history for genetic and familial risk assessment",
			"description": "Medical conditions present in family members (mother, father, siblings, children) that may indicate genetic predisposition or familial risk factors",
			"properties": {
				"conditions": {
					"type": "array",
					"description": "List of medical conditions affecting family members",
					"items": {
						"type": "object",
						"properties": {
							"condition": {
								"type": "string",
								"description": "Name of medical condition present in family"
							},
							"familyMembers": {
								"type": "array",
								"description": "Which family members have this condition",
								"items": {
									"type": "string",
									"enum": ["mother", "father", "sibling", "child", "other"]
								}
							}
						},
						"required": ["condition", "familyMembers"],
						"additionalProperties": false
					}
				},
				"unknownFamilyHistory": {
					"type": "boolean",
					"description": "Whether family history is unknown (adopted, estranged, or patient unable to provide)"
				}
			},
			"required": ["unknownFamilyHistory"],
			"additionalProperties": false
		}
	},
	"required": [
		"pastMedicalHistory",
		"allergies",
		"socialHistory",
		"familyHistory"
	],
	"additionalProperties": false
}
